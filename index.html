<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GDIS Solar - Proposta</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap">
  <style>
    /* ---------------------- */
    /* Cores e Variáveis      */
    /* ---------------------- */
    :root {
      /* Tema padrão: Alta Performance */
      --main-blue: #123d8c;
      --dark-blue: #0a2a5c;
      --highlight-color: #ff7a29;
      --secondary-highlight: #ff7a29;
      --white: #ffffff;
      --light-gray: #f4f6fb;
      --muted-text: #6f7d95;
      --nav-bg: rgba(18, 61, 140, 0.9);
      --gradient-bg: linear-gradient(135deg, var(--main-blue) 0%, var(--dark-blue) 50%, #174296 100%);
      --radius: 22px;
      --shadow: 0 8px 20px rgba(0, 0, 0, .15);
    }

    body.economic-theme {
      /* NOVO TEMA: Econômico */
      --main-blue: #598c76;
      --dark-blue: #315243;
      --highlight-color: #79c9a0;
      --secondary-highlight: #598c76;
      --white: #ffffff;
      --light-gray: #f7faf7;
      --muted-text: #6f7d95;
      --nav-bg: rgba(89, 140, 118, 0.9);
      --gradient-bg: linear-gradient(135deg, var(--main-blue) 0%, var(--dark-blue) 50%, #4c6f5d 100%);
    }
    
    /* ---------------------- */
    /* Estilos Gerais         */
    /* ---------------------- */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Inter', sans-serif;
      line-height: 1.6;
      transition: background-color 0.5s ease;
      color: var(--dark-blue);
      background: var(--light-gray);
    }
    
    /* Esconde as seções de proposta por padrão */
    .proposal-container {
        display: none;
        background: var(--light-gray);
        color: var(--dark-blue);
    }

    /* Estilos para o container do formulário */
    .form-container {
        background: var(--gradient-bg);
        color: var(--white);
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        flex-direction: column;
        transition: background 0.5s ease;
    }

    .form-box {
      width: 100%;
      max-width: 500px;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      padding: 40px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      text-align: center;
    }

    .form-box .logo img {
      height: 80px;
      margin-bottom: 20px;
    }

    .form-box h1 {
      font-size: clamp(28px, 5vw, 40px);
      font-weight: 800;
      margin-bottom: 10px;
    }

    .form-box p {
      font-size: 16px;
      margin-bottom: 30px;
      opacity: 0.8;
    }

    .search-form {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .search-form input[type="text"] {
      width: 100%;
      padding: 15px 20px;
      border-radius: 50px;
      border: none;
      font-size: 16px;
      background: rgba(255, 255, 255, 0.2);
      color: var(--white);
      transition: background 0.3s ease;
    }

    .search-form input[type="text"]::placeholder {
      color: rgba(255, 255, 255, 0.7);
    }

    .search-form input[type="text"]:focus {
      outline: none;
      background: rgba(255, 255, 255, 0.3);
    }

    .search-form button {
      width: 100%;
      padding: 15px 20px;
      border-radius: 50px;
      border: none;
      font-size: 18px;
      font-weight: 700;
      cursor: pointer;
      background: var(--highlight-color);
      color: var(--white);
      transition: background 0.3s ease, transform 0.1s;
    }

    .search-form button:hover {
      background: var(--secondary-highlight);
    }

    .search-form button:active {
      transform: translateY(1px);
    }

    .message-box {
      margin-top: 20px;
      padding: 15px;
      background: rgba(255, 0, 0, 0.2);
      border-radius: 8px;
      display: none;
      font-size: 14px;
      font-weight: 500;
      border: 1px solid rgba(255, 0, 0, 0.4);
    }

    /* Estilos da página de apresentação */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    .clean-section {
      background: var(--white);
      margin: 40px 0;
      padding: 60px 20px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      transition: background-color 0.5s ease;
    }

    .clean-section:first-of-type {
      margin-top: 0;
    }

    section {
      position: relative;
      overflow: hidden;
    }

    .payback-section-bg {
      background: var(--dark-blue);
      color: var(--white);
      margin: 40px 0;
      padding: 60px 20px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      transition: background-color 0.5s ease;
    }

    .payback-section-bg h2 {
      color: var(--white);
    }

    section h2 {
      text-align: center;
      font-size: clamp(28px, 4vw, 40px);
      margin-bottom: 12px;
      color: var(--dark-blue);
      font-weight: 700;
      transition: color 0.5s ease;
    }

    section p.lead {
      text-align: center;
      color: var(--muted-text);
      margin-bottom: 40px;
      font-size: 18px;
      transition: color 0.5s ease;
    }

    .grid {
      display: grid;
      gap: 30px;
    }

    .grid-2 {
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    }

    .grid-3 {
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    }

    .card {
      background: var(--white);
      border-radius: var(--radius);
      padding: 30px;
      box-shadow: var(--shadow);
      transition: all .3s ease, background-color 0.5s ease;
    }

    .card:hover {
      transform: translateY(-5px);
    }

    .text-center {
      text-align: center;
    }

    /* ---------------------- */
    /* Barra de Navegação Fixa*/
    /* ---------------------- */
    .nav-bar {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: var(--nav-bg);
      padding: 20px 30px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      z-index: 1000;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      transition: background 0.5s ease;
    }

    .nav-bar .logo {
      display: flex;
      align-items: center;
    }

    .nav-bar img {
      height: 60px;
    }

    .nav-middle-content {
      display: flex;
      flex: 1;
      justify-content: center;
      align-items: center;
      gap: 20px;
    }

    /* Estado inicial: Recolhido e Transparente */
    .header-prices-info {
      max-width: 0;
      opacity: 0;
      overflow: hidden;
      display: flex;
      align-items: center;
      gap: 20px;
      transition: max-width 0.6s ease, opacity 0.6s ease;
      flex-shrink: 0;
    }

    /* Estado visível: expandido e opaco */
    .nav-bar.show-prices .header-prices-info {
      max-width: 500px; /* Valor arbitrário maior que o conteúdo */
      opacity: 1;
    }

    .header-price-item {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .header-price-item small {
      color: #d1d9e2;
      font-size: 11px;
      font-weight: 500;
      text-transform: uppercase;
      margin-bottom: 2px;
    }

    .header-price-item p {
      color: var(--white);
      font-size: 16px;
      font-weight: 700;
      line-height: 1;
      margin: 0;
    }

    .header-price-item .min-parcel-label {
      text-align: center;
    }

    .header-price-item .max-installments {
      color: var(--highlight-color);
      font-size: 11px;
      font-weight: 600;
      margin-top: 2px;
      transition: color 0.5s ease;
    }

    @media (min-width: 1024px) {
        .nav-bar .logo {
            flex-shrink: 0;
        }
        .nav-bar .proposal-options {
            flex-grow: 1;
            justify-content: flex-end;
        }
        .nav-middle-content {
          flex: 1 1 auto;
          gap: 40px;
        }
        .nav-bar .header-prices-info {
          justify-content: flex-start;
        }
    }

    @media (max-width: 1023px) {
        .header-prices-info {
          display: none;
        }
    }

    /* ---------------------- */
    /* Cabeçalho Hero         */
    /* ---------------------- */
    header.hero {
      background: var(--gradient-bg);
      color: var(--white);
      padding: 120px 20px 100px;
      position: relative;
      overflow: hidden;
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      transition: background 0.5s ease;
    }

    header.hero .title-and-subtitle {
      margin-top: 100px;
    }

    header.hero h1 {
      font-size: clamp(38px, 6vw, 68px);
      font-weight: 800;
      margin-bottom: 10px;
      line-height: 1.1;
    }

    /* ---------------------- */
    /* Detalhes da Proposta   */
    /* ---------------------- */
    .proposal-details {
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(5px);
      border-radius: 12px;
      padding: 20px;
      margin-top: 20px;
      display: flex;
      gap: 30px;
      flex-wrap: wrap;
      justify-content: center;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    .proposal-details .item {
      text-align: center;
      flex: 1 1 150px;
    }

    .proposal-details .item h3 {
      font-size: 14px;
      color: #b3c2e1;
      font-weight: 500;
      margin-bottom: 4px;
    }

    .proposal-details .item p {
      font-size: 16px;
      font-weight: 600;
      color: var(--white);
      margin: 0;
      word-break: break-word;
    }

    /* Estilos para os botões de escolha de proposta */
    .proposal-options {
      display: flex;
      gap: 10px;
      justify-content: flex-end;
      width: 100%;
    }

    /* Botão não selecionado (inativo) - agora com 80% de transparência */
    .proposal-options .option {
      background: rgba(233, 236, 239, 0.2); /* Fundo 80% transparente */
      border: 2px solid transparent; /* Remove a borda no estado inativo */
      border-radius: 50px;
      padding: 12px 24px;
      cursor: pointer;
      transition: all .3s ease;
      font-weight: 600;
      font-size: 14px;
      color: #d1d9e2; /* Cinza muito claro */
      display: flex;
      align-items: center;
      gap: 8px;
    }

    /* Botão selecionado (ativo) - com a borda branca discreta */
    .proposal-options .option.selected {
      color: var(--white);
      border: 2px solid var(--white); /* Borda branca discreta */
      box-shadow: 0 4px 10px rgba(0,0,0,.2);
    }

    /* Regras de cores para o botão ATIVO, dependendo do tema */
    .option.selected.high-performance-active {
        background: var(--highlight-color);
    }

    .option.selected.economic-active {
        background: var(--highlight-color);
    }

    .proposal-options .option input {
      display: none;
    }

    /* ---------------------- */
    /* Seção de Informações   */
    /* ---------------------- */
    .info-card {
      text-align: center;
      padding: 40px 20px;
    }

    .info-card svg {
      width: 48px;
      height: 48px;
      margin-bottom: 12px;
      color: var(--highlight-color);
      transition: color 0.5s ease;
    }

    .info-card h3 {
      font-size: 18px;
      font-weight: 600;
      color: var(--dark-blue);
      margin-bottom: 5px;
      transition: color 0.5s ease;
    }

    .info-card .value {
      font-size: 32px;
      font-weight: 800;
      color: var(--highlight-color);
      margin: 0;
      line-height: 1.2;
      transition: color 0.5s ease;
    }

    .info-card-icon {
      display: block;
      width: 48px;
      height: 48px;
      margin: 0 auto 12px;
      color: var(--highlight-color);
      transition: color 0.5s ease;
    }

    /* ---------------------- */
    /* Seção de Payback       */
    /* ---------------------- */
    .payback-section-bg {
      background: var(--dark-blue);
      color: var(--white);
      margin: 40px 0;
      padding: 60px 20px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      transition: background-color 0.5s ease;
    }

    .payback-content-container {
      max-width: 800px;
      margin: 0 auto;
      padding: 40px;
      border-radius: var(--radius);
      background: var(--white);
      box-shadow: var(--shadow);
      text-align: center;
      transition: background-color 0.5s ease;
    }

    .payback-details {
      font-size: 16px;
      color: var(--muted-text);
      max-width: 600px;
      margin: 0 auto;
      transition: color 0.5s ease;
    }

    .payback-details strong {
      color: var(--highlight-color);
      transition: color 0.5s ease;
    }

    .payback-highlight-box {
      margin-top: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }

    .payback-highlight-box svg {
      width: 50px;
      height: 50px;
      color: var(--highlight-color);
      transition: color 0.5s ease;
    }

    .payback-highlight-box p {
      font-size: clamp(20px, 4vw, 28px);
      font-weight: 600;
      color: var(--dark-blue);
      transition: color 0.5s ease;
    }

    .payback-highlight-box p strong {
      font-size: clamp(24px, 5vw, 36px);
      font-weight: 900;
      color: var(--highlight-color);
      display: block;
      margin-top: 5px;
      transition: color 0.5s ease;
    }

    /* ---------------------- */
    /* Seção de Equipamentos */
    /* ---------------------- */
    .prod-grid {
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 25px;
    }

    .prod-card h3 {
      font-size: 22px;
      margin-bottom: 8px;
    }

    .prod-table {
      margin-top: 15px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      background: var(--light-gray);
      border-radius: 16px;
      overflow: hidden;
      box-shadow: inset 0 0 5px rgba(0, 0, 0, .05);
      transition: background-color 0.5s ease;
    }

    .prod-table div {
      padding: 15px;
      border-bottom: 1px solid #ddd;
      font-size: 15px;
    }

    .prod-table div:nth-child(2n) {
      border-left: 1px solid #ddd;
      font-weight: 600;
      color: var(--dark-blue);
      transition: color 0.5s ease;
    }

    /* ----------------------------- */
    /* Seção de Instalação */
    /* ----------------------------- */
    .installation-content {
      margin-top: 30px;
      transition: opacity 0.5s ease;
    }

    .feature-card {
      background: var(--light-gray);
      border-radius: var(--radius);
      padding: 20px;
      box-shadow: inset 0 0 5px rgba(0,0,0,0.05);
      text-align: center;
      transition: all .3s ease, background-color 0.5s ease;
    }

    .feature-card svg {
      width: 48px;
      height: 48px;
      color: var(--highlight-color);
      margin-bottom: 15px;
    }

    .feature-card h3 {
      font-size: 20px;
      font-weight: 700;
      color: var(--dark-blue);
    }

    .feature-card p {
      font-size: 16px;
      color: var(--muted-text);
      line-height: 1.4;
      margin-top: 5px;
    }

    /* ---------------------- */
    /* Seção de Pagamento */
    /* ---------------------- */
    .payment-value-section {
      text-align: center;
      margin-bottom: 40px;
    }

    .payment-value-section h2 {
      font-size: clamp(32px, 5vw, 44px);
      font-weight: 800;
      color: var(--dark-blue);
      transition: color 0.5s ease;
    }

    .highlight-avista {
      background: var(--highlight-color);
      color: var(--white);
      font-weight: 800;
      font-size: 0.7em;
      padding: 6px 16px;
      border-radius: 50px;
      position: relative;
      top: -8px;
      display: inline-block;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      transition: background-color 0.5s ease;
    }

    .payment-value-section .price-highlight {
      font-size: clamp(48px, 8vw, 72px);
      font-weight: 900;
      color: var(--highlight-color);
      margin: 0;
      line-height: 1.2;
      transition: color 0.5s ease;
    }

    .payment-value-section .min-parcel-label {
      font-size: 14px;
      color: var(--muted-text);
      margin-top: 5px;
      transition: color 0.5s ease;
    }

    /* ---------------------- */
    /* Rodapé                 */
    /* ---------------------- */
    footer {
      background: var(--dark-blue);
      color: var(--white);
      text-align: center;
      padding: 40px 20px;
      margin-top: 40px;
      border-radius: var(--radius) var(--radius) 0 0;
      transition: background-color 0.5s ease;
    }

    footer .contact-info {
      margin-top: 20px;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 15px;
      font-size: 16px;
    }

    footer .contact-info a {
      color: var(--white);
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: color 0.3s ease;
    }

    footer .contact-info a:hover {
      color: var(--highlight-color);
    }

    footer .contact-info svg {
      color: var(--white);
      transition: color 0.5s ease;
    }

    footer .contact-info a:hover svg {
      color: var(--highlight-color);
    }
  </style>
</head>
<body>

  <!-- Container do Formulário de Consulta (visível por padrão) -->
  <div class="form-container" id="formContainer">
    <div class="form-box">
      <div class="logo">
        <img src="logo.png" alt="Logo da GDIS Solar">
      </div>
      <h1>Consulte Sua Proposta</h1>
      <p>Digite seu CPF para encontrar a proposta que a GDIS Solar preparou para você.</p>
      <div class="search-form">
          <input type="text" id="cpf" placeholder="CPF (apenas números)" maxlength="11">
          <button id="btnConsultar">Consultar Proposta</button>
      </div>
      <div id="message-box" class="message-box"></div>
    </div>
  </div>

  <!-- Container da Proposta (escondido por padrão) -->
  <div class="proposal-container" id="proposalContainer">

    <!-- Barra de navegação fixa no topo -->
    <nav class="nav-bar">
      <div class="logo">
        <img src="logo.png" alt="Logo da GDIS Solar">
      </div>

      <!-- Opções de proposta para os botões -->
      <div class="nav-middle-content">
        <div class="header-prices-info">
          <div class="header-price-item">
            <small>Preço a vista</small>
            <p class="avista-price" id="navAvistaPrice">R$ 0,00</p>
          </div>
          <div class="header-price-item">
            <small>Parcelas a partir de</small>
            <p class="min-parcel" id="navMinParcel">R$ 0,00</p>
            <p class="max-installments" id="navMaxInstallments">em 48x</p>
          </div>
        </div>
        <div class="proposal-options">
          <label class="option" id="optionHighPerformance">
            <input type="radio" name="proposal_type" value="high-performance">
            Alta Performance
          </label>
          <label class="option" id="optionEconomic">
            <input type="radio" name="proposal_type" value="economic">
            Econômica
          </label>
        </div>
      </div>
    </nav>

    <!-- Cabeçalho principal com o nome do cliente -->
    <header class="hero">
      <div class="title-and-subtitle">
        <h1>Olá, <span id="clientName">Cliente</span>.</h1>
        <p class="lead">Sua proposta de energia solar está pronta.</p>
      </div>
      <div class="proposal-details">
          <div class="item">
              <h3>Nº da Proposta</h3>
              <p id="propNumero">#0000</p>
          </div>
          <div class="item">
              <h3>Valor Total</h3>
              <p id="propValor">R$ 0,00</p>
          </div>
          <div class="item">
              <h3>Status</h3>
              <p id="propStatus">Pendente</p>
          </div>
      </div>
    </header>

    <main>
      <!-- Seção: Energia Solar para sua casa ou empresa -->
      <section class="clean-section">
        <div class="container">
          <h2>Energia Solar Para Sua Casa ou Empresa</h2>
          <p class="lead">Benefícios de investir em um sistema fotovoltaico.</p>
          <div class="grid grid-3">
            <div class="card info-card">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 2v2" />
                <path d="M12 18v4" />
                <path d="M4.93 4.93l1.41 1.41" />
                <path d="M17.66 17.66l1.41 1.41" />
                <path d="M2 12h2" />
                <path d="M18 12h4" />
                <path d="M4.93 19.07l1.41-1.41" />
                <path d="M17.66 6.34l1.41-1.41" />
                <circle cx="12" cy="12" r="7" />
              </svg>
              <h3>Economia na Conta</h3>
              <p>Reduza em até 95% o valor da sua fatura de energia.</p>
            </div>
            <div class="card info-card">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V8z" />
                <polyline points="14 2 14 8 20 8" />
                <line x1="16" y1="13" x2="8" y2="13" />
                <line x1="16" y1="17" x2="8" y2="17" />
                <polyline points="10 9 9 9" />
              </svg>
              <h3>Valorização do Imóvel</h3>
              <p>Seu imóvel se torna mais atrativo e valorizado no mercado.</p>
            </div>
            <div class="card info-card">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M22 10.5V12a10 10 0 0 1-20 0v-1.5" />
                <path d="M22 10.5A10 10 0 0 0 12 1h0A10 10 0 0 0 2 10.5" />
                <path d="M12 12a10 10 0 0 0 8 9.5" />
                <path d="M12 12a10 10 0 0 1-8 9.5" />
                <line x1="12" y1="2" x2="12" y2="12" />
              </svg>
              <h3>Energia Limpa</h3>
              <p>Contribua para um futuro mais verde e sustentável.</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Seção de Payback - Retorno sobre o investimento -->
      <section class="payback-section-bg">
        <div class="container text-center">
          <h2>Retorno Sobre o Investimento</h2>
          <p class="lead">Entenda em quanto tempo o seu sistema se paga.</p>
          <div class="payback-content-container">
            <p class="payback-details">O tempo médio de retorno do seu investimento é de apenas <strong>3 a 5 anos.</strong> Depois disso, a energia gerada é lucro puro, garantindo uma economia que pode durar por mais de 25 anos.</p>
            <div class="payback-highlight-box">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="1" y="4" width="22" height="16" rx="2" ry="2" />
                <line x1="1" y1="10" x2="22" y2="10" />
              </svg>
              <p>Payback estimado: <strong id="paybackYears">4 anos</strong></p>
            </div>
          </div>
        </div>
      </section>

      <!-- Seção de Equipamentos -->
      <section class="clean-section" id="sectionEquipamentos">
          <div class="container">
              <h2>Equipamentos</h2>
              <p class="lead">Itens incluídos no seu kit GDIS Solar.</p>
              <div class="grid prod-grid">
                  <div class="card prod-card">
                      <h3>Inversor <br> <span id="inversorModelo"></span></h3>
                      <div class="prod-table">
                          <div>Fabricante</div>
                          <div id="inversorFabricante"></div>
                          <div>Potência</div>
                          <div id="inversorPotencia"></div>
                          <div>Garantia</div>
                          <div id="inversorGarantia"></div>
                      </div>
                  </div>
                  <div class="card prod-card">
                      <h3>Módulo Solar <br> <span id="moduloModelo"></span></h3>
                      <div class="prod-table">
                          <div>Fabricante</div>
                          <div id="moduloFabricante"></div>
                          <div>Potência</div>
                          <div id="moduloPotencia"></div>
                          <div>Quantidade</div>
                          <div id="moduloQuantidade"></div>
                          <div>Garantia</div>
                          <div id="moduloGarantia"></div>
                      </div>
                  </div>
              </div>
          </div>
      </section>

      <!-- Seção de Instalação -->
      <section class="clean-section" id="sectionInstalacao">
          <div class="container">
              <h2>Instalação</h2>
              <p class="lead" id="instalacaoTitulo"></p>
              <div class="grid grid-3 installation-content">
                  <div class="feature-card">
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                          <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
                          <path d="M12 12s0-2 2-2 2 2 0 2-2 2-2-2" />
                      </svg>
                      <h3>Segurança</h3>
                      <p>Nossa equipe de instalação segue todos os padrões e normas técnicas para garantir a sua segurança e a longevidade do sistema.</p>
                  </div>
                  <div class="feature-card">
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                          <polyline points="16 18 22 12 16 6" />
                          <polyline points="8 6 2 12 8 18" />
                      </svg>
                      <h3>Eficiência</h3>
                      <p>Otimização máxima para captar a maior quantidade de energia solar possível, gerando o melhor desempenho para sua casa ou empresa.</p>
                  </div>
                  <div class="feature-card">
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                          <path d="M22 17H2a2 2 0 0 1-2-2V9c0-1.1.9-2 2-2h14l4 4-4 4h-4"/>
                      </svg>
                      <h3>Tecnologia</h3>
                      <p>Sistemas de ponta com monitoramento online, permitindo acompanhar em tempo real a produção de energia, a economia e a redução de CO2.</p>
                  </div>
              </div>
          </div>
      </section>

      <!-- Seção de Pagamento -->
      <section class="clean-section" id="sectionPagamento">
          <div class="container">
              <div class="payment-value-section">
                  <h2>O melhor investimento</h2>
                  <span class="highlight-avista">À VISTA</span>
                  <h2 class="price-highlight" id="pagamentoValorAvista">R$ 0,00</h2>
                  <p class="min-parcel-label">ou a partir de <strong id="pagamentoParcelaMinima">R$ 0,00</strong></p>
              </div>
          </div>
      </section>
    </main>

    <footer>
      <div class="container">
        <img src="logo.png" alt="Logo GDIS Solar" style="height: 50px;">
        <p style="margin-top: 10px;">Transformando a luz do sol em economia para você.</p>
        <div class="contact-info">
          <p class="contact-info">
            <a href="https://wa.me/5511999999999" target="_blank" class="contact-link">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" />
              </svg>
              (11) 99999-9999
            </a>
          </p>
          <p class="contact-info">
            <a href="mailto:gdis.solar@gmail.com" class="contact-link">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" />
                <polyline points="22,6 12,13 2,6" />
              </svg>
              gdis.solar@gmail.com
            </a>
          </p>
          <p class="contact-info">
            <a href="https://www.instagram.com/gdis.solar" target="_blank" class="contact-link">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="2" y="2" width="20" height="20" rx="5" ry="5" />
                <path d="M16 11.37A4 4 0 1 1 12.63 8a4 4 0 0 1 3.37 3.37z" />
                <line x1="17.5" y1="6.5" x2="17.5" y2="6.5" />
              </svg>
              gdis.solar
            </a>
          </p>
        </div>
      </div>
    </footer>

  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // Obtenção de elementos para manipular o DOM
      const formContainer = document.getElementById("formContainer");
      const proposalContainer = document.getElementById("proposalContainer");
      const navBar = document.querySelector('.nav-bar');
      const navBarAvistaPrice = document.getElementById("navAvistaPrice");
      const navBarMinParcel = document.getElementById("navMinParcel");
      const navBarMaxInstallments = document.getElementById("navMaxInstallments");
      const optionHighPerformance = document.getElementById("optionHighPerformance");
      const optionEconomic = document.getElementById("optionEconomic");
      const clientName = document.getElementById("clientName");
      const propNumero = document.getElementById("propNumero");
      const propValor = document.getElementById("propValor");
      const propStatus = document.getElementById("propStatus");
      const inversorModelo = document.getElementById("inversorModelo");
      const inversorFabricante = document.getElementById("inversorFabricante");
      const inversorPotencia = document.getElementById("inversorPotencia");
      const inversorGarantia = document.getElementById("inversorGarantia");
      const moduloModelo = document.getElementById("moduloModelo");
      const moduloFabricante = document.getElementById("moduloFabricante");
      const moduloPotencia = document.getElementById("moduloPotencia");
      const moduloQuantidade = document.getElementById("moduloQuantidade");
      const moduloGarantia = document.getElementById("moduloGarantia");
      const instalacaoTitulo = document.getElementById("instalacaoTitulo");
      const pagamentoValorAvista = document.getElementById("pagamentoValorAvista");
      const pagamentoParcelaMinima = document.getElementById("pagamentoParcelaMinima");
      const paybackYears = document.getElementById("paybackYears");
      const body = document.body;

      // Elementos do formulário
      const btnConsultar = document.getElementById("btnConsultar");
      const cpfInput = document.getElementById("cpf");
      const messageBox = document.getElementById("message-box");

      // Event listener para o botão de consulta do formulário
      btnConsultar.addEventListener("click", async () => {
        const cpf = cpfInput.value.trim();
        if (!cpf || cpf.length !== 11 || !/^\d+$/.test(cpf)) {
            showMessage("Por favor, informe um CPF válido (11 dígitos, apenas números).", "error");
            return;
        }
        showMessage("Consultando sua proposta...", "info");
        btnConsultar.disabled = true;

        try {
            const proposta = await consultarProposta(cpf);
            if (!proposta || !proposta.id) {
                showMessage("Nenhuma proposta ativa encontrada para este CPF. Por favor, verifique o número e tente novamente.", "error");
                btnConsultar.disabled = false;
                return;
            }
            // Preenche a página e exibe o conteúdo da proposta
            populateProposalPage(proposta);
            showProposalPage();
        } catch (err) {
            console.error(err);
            showMessage("Erro na consulta. Por favor, verifique sua conexão ou tente novamente.", "error");
            btnConsultar.disabled = false;
        }
      });

      // Event listeners para os botões de escolha de proposta (Alta Performance/Econômica)
      optionHighPerformance.addEventListener("click", () => handleProposalTypeChange('high-performance'));
      optionEconomic.addEventListener("click", () => handleProposalTypeChange('economic'));

      /**
       * Funções de manipulação do DOM e lógica
       */

      /**
       * Exibe mensagens na tela com estilo e cor apropriados.
       * @param {string} message - A mensagem a ser exibida.
       * @param {string} type - Tipo de mensagem ('info' ou 'error').
       */
      function showMessage(message, type) {
        messageBox.textContent = message;
        messageBox.style.display = "block";
        messageBox.style.backgroundColor = type === "error" ? "rgba(255, 0, 0, 0.2)" : "rgba(0, 255, 0, 0.2)";
        messageBox.style.borderColor = type === "error" ? "rgba(255, 0, 0, 0.4)" : "rgba(0, 255, 0, 0.4)";
      }

      /**
       * Alterna a visibilidade do formulário e da página de proposta.
       */
      function showProposalPage() {
        formContainer.style.display = 'none';
        proposalContainer.style.display = 'block';
      }

      /**
       * Atualiza o DOM com os dados da proposta.
       * @param {Object} proposta - O objeto da proposta recebido do backend.
       */
      function populateProposalPage(proposta) {
        // Preenche os dados do cliente e da proposta
        clientName.textContent = proposta.cliente?.nome || "Cliente";
        propNumero.textContent = proposta.id || "#0000";
        propValor.textContent = (proposta.valor_total || 0).toLocaleString("pt-BR", { minimumFractionDigits: 2, style: 'currency', currency: 'BRL' });
        propStatus.textContent = proposta.status || "Pendente";

        // Preenche os dados da navegação
        navBarAvistaPrice.textContent = (proposta.valor_total || 0).toLocaleString("pt-BR", { minimumFractionDigits: 2, style: 'currency', currency: 'BRL' });
        navBarMinParcel.textContent = `R$ ${(proposta.valor_parcela || 0).toLocaleString("pt-BR", { minimumFractionDigits: 2 })}`;
        navBarMaxInstallments.textContent = `em ${proposta.parcelas || 48}x`;

        // Manipula o tema e os dados com base no tipo de proposta
        if (proposta.instalacao_tipo) {
            handleProposalTypeChange(proposta.instalacao_tipo, proposta);
        }
      }

      /**
       * Lida com a mudança de tipo de proposta (Alta Performance/Econômica).
       * Atualiza o tema e os dados da página.
       * @param {string} type - 'high-performance' ou 'economic'.
       * @param {Object} [proposta] - O objeto da proposta.
       */
      function handleProposalTypeChange(type, proposta = null) {
          // Remove a classe de seleção de todos os botões
          optionHighPerformance.classList.remove('selected', 'high-performance-active', 'economic-active');
          optionEconomic.classList.remove('selected', 'high-performance-active', 'economic-active');
          body.classList.remove('economic-theme');

          // Adiciona a classe de seleção ao botão correto e atualiza o tema
          if (type === 'high-performance') {
              optionHighPerformance.classList.add('selected', 'high-performance-active');
              body.classList.remove('economic-theme');
          } else if (type === 'economic') {
              optionEconomic.classList.add('selected', 'economic-active');
              body.classList.add('economic-theme');
          }
          
          // Se a proposta foi passada (na carga inicial), preenche todos os dados
          if (proposta) {
            populateProposalData(proposta);
          }
      }
      
      /**
       * Preenche os dados de acordo com o tipo de proposta e o objeto de dados.
       * @param {Object} proposta - O objeto da proposta.
       */
      function populateProposalData(proposta) {
          // Preenche os dados dos equipamentos
          if (proposta.kit) {
              const inversor = proposta.kit.inversor || {};
              const modulo = proposta.kit.modulo_solar || {};
              
              inversorModelo.textContent = inversor.modelo || "";
              inversorFabricante.textContent = inversor.fabricante || "-";
              inversorPotencia.textContent = (inversor.potencia || 0) + "kW";
              inversorGarantia.textContent = (inversor.garantia || 0) + " anos";

              moduloModelo.textContent = modulo.modelo || "";
              moduloFabricante.textContent = modulo.fabricante || "-";
              moduloPotencia.textContent = (modulo.potencia || 0) + "W";
              moduloQuantidade.textContent = (modulo.quantidade || 0) + " und";
              moduloGarantia.textContent = (modulo.garantia || 0) + " anos";
          }
          
          // Preenche os dados de instalação e pagamento
          instalacaoTitulo.textContent = `Instalação ${proposta.instalacao_tipo === 'premium' ? 'Premium' : 'Simples'}`;
          pagamentoValorAvista.textContent = (proposta.valor_total || 0).toLocaleString("pt-BR", { minimumFractionDigits: 2, style: 'currency', currency: 'BRL' });
          pagamentoParcelaMinima.textContent = `R$ ${(proposta.valor_parcela || 0).toLocaleString("pt-BR", { minimumFractionDigits: 2 })}`;
          paybackYears.textContent = `${proposta.payback_anos || 4} anos`;
          navBarAvistaPrice.textContent = (proposta.valor_total || 0).toLocaleString("pt-BR", { minimumFractionDigits: 2, style: 'currency', currency: 'BRL' });
          navBarMinParcel.textContent = `R$ ${(proposta.valor_parcela || 0).toLocaleString("pt-BR", { minimumFractionDigits: 2 })}`;
      }

      /**
       * Consulta a proposta ativa de um cliente chamando o backend.
       * @param {string} cpf - O CPF do cliente.
       * @returns {Promise<Object|null>} Um objeto com a proposta ou null em caso de falha.
       */
      async function consultarProposta(cpf) {
          const backendUrl = `https://gdissolarproposta.vercel.app/api/proposta?cpf=${cpf}`;
          try {
              const res = await fetch(backendUrl);
              if (!res.ok) {
                  const errorData = await res.json();
                  throw new Error(`Erro HTTP: ${res.status} - ${errorData.message || 'Erro desconhecido'}`);
              }
              const dados = await res.json();
              return dados;
          } catch (err) {
              console.error("Erro ao consultar proposta:", err);
              throw err;
          }
      }
    });
  </script>
</body>
</html>
